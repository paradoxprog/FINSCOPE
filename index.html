<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FINSCOPE - Your AI Financial Twin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore-compat.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .tab-active {
            border-color: #3b82f6;
            color: #3b82f6;
            font-weight: 600;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-blue-600 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12B2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12z"></path><path d="M12 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"></path><path d="M12 14c-2.67 0-8 1.33-8 4v2h16v-2c0-2.67-5.33-4-8-4z"></path></svg>
                FINSCOPE
            </a>
            <button id="loginBtn" class="bg-blue-600 text-white font-semibold px-5 py-2 rounded-lg hover:bg-blue-700 transition-colors">Login / Sign Up</button>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="bg-white">
            <div class="container mx-auto px-6 py-20 text-center">
                <h1 class="text-4xl md:text-6xl font-bold text-gray-900 leading-tight">Meet Your AI Financial Twin</h1>
                <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Simulate your financial future, get personalized advice, and achieve your goals with a digital version of you.</p>
                <button id="getStartedBtnHero" class="mt-8 bg-blue-600 text-white font-bold px-8 py-4 rounded-lg text-lg hover:bg-blue-700 transition-transform transform hover:scale-105">Create Your Twin for Free</button>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900">How FINSCOPE Works</h2>
                    <p class="mt-2 text-gray-600">A simple, step-by-step journey to financial clarity.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Cards are the same as before -->
                    <div class="bg-white p-8 rounded-xl shadow-md feature-card transition-all">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 text-blue-600 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2">1. User Onboarding</h3>
                        <p class="text-gray-600">Securely connect your financial accounts. We'll gather initial data on your income, expenses, and goals to get started.</p>
                    </div>
                    <div class="bg-white p-8 rounded-xl shadow-md feature-card transition-all">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-green-100 text-green-600 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="M16.24 7.76A6 6 0 0 0 7.76 16.24"/><path d="M12 18a6 6 0 0 0 0-12"/></svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2">2. Create the Financial Twin</h3>
                        <p class="text-gray-600">Our AI creates your "Financial Twin" based on your unique behavior. It learns how you spend, save, and make financial decisions.</p>
                    </div>
                    <div class="bg-white p-8 rounded-xl shadow-md feature-card transition-all">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-purple-100 text-purple-600 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8"><path d="M2.5 2v6h6M21.5 22v-6h-6"/><path d="M22 11.5A10 10 0 0 0 3.5 12.5"/><path d="M2 12.5a10 10 0 0 0 18.5-1"/></svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2">3. Personalized Advice</h3>
                        <p class="text-gray-600">Receive real-time, tailored suggestions—like saving tips, spending alerts, or smarter investment ideas—based on your behavior.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Security Section -->
        <section id="security" class="py-20 bg-blue-50">
            <div class="container mx-auto px-6 text-center">
                 <div class="flex items-center justify-center h-20 w-20 rounded-full bg-blue-200 text-blue-700 mb-4 mx-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-10 h-10"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900">Secure & Private By Design</h2>
                <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Your trust is our top priority. All your data is encrypted and protected with bank-level security. You always stay in control of your information.</p>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white">
        <div class="container mx-auto px-6 py-8 text-center">
            <p>&copy; 2024 FINSCOPE. All rights reserved.</p>
            <p class="text-sm text-gray-400 mt-2">Your Financial Future, Simulated.</p>
        </div>
    </footer>
    
    <!-- Auth Modal -->
    <div id="authModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-8 rounded-lg shadow-2xl w-full max-w-md m-4 transform transition-all" id="modalContent">
            <div class="flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-900">Welcome to FINSCOPE</h2>
                <button id="closeModalBtn" class="text-gray-500 hover:text-gray-800 text-3xl leading-none">&times;</button>
            </div>
            
            <div class="border-b border-gray-200 mt-4">
                <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                    <button id="signupTab" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm tab-active">Sign Up</button>
                    <button id="loginTab" class="whitespace-nowrap py-4 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-sm">Log In</button>
                </nav>
            </div>

            <!-- Sign Up Form -->
            <div id="signupForm" class="mt-6">
                <div class="mb-4">
                    <label for="signupName" class="block text-sm font-medium text-gray-700">Full Name</label>
                    <input type="text" id="signupName" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="John Doe">
                </div>
                <div class="mb-4">
                    <label for="signupEmail" class="block text-sm font-medium text-gray-700">Email Address</label>
                    <input type="email" id="signupEmail" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="you@example.com">
                </div>
                <div class="mb-6">
                    <label for="signupPassword" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="signupPassword" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="••••••••">
                </div>
                <button id="signupBtn" class="w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors">Create Account</button>
            </div>

            <!-- Log In Form -->
            <div id="loginForm" class="mt-6 hidden">
                <div class="mb-4">
                    <label for="loginEmail" class="block text-sm font-medium text-gray-700">Email Address</label>
                    <input type="email" id="loginEmail" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="you@example.com">
                </div>
                <div class="mb-6">
                    <label for="loginPassword" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="loginPassword" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="••••••••">
                </div>
                <button id="loginEmailBtn" class="w-full bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors">Log In</button>
            </div>

            <div class="relative my-6">
                <div class="absolute inset-0 flex items-center" aria-hidden="true">
                    <div class="w-full border-t border-gray-300"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="px-2 bg-white text-gray-500">OR</span>
                </div>
            </div>

            <button id="googleSignInBtn" class="w-full flex justify-center items-center gap-2 bg-white text-gray-700 font-semibold py-3 px-4 rounded-lg hover:bg-gray-50 transition-colors border border-gray-300">
                <svg class="w-5 h-5" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="google" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 512"><path fill="currentColor" d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 126 23.4 172.9 61.9l-76.2 74.7C309 93.5 280.7 80 248 80c-82.6 0-150 67.4-150 150s67.4 150 150 150c94.5 0 135.7-77.6 140.8-112.2H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"></path></svg>
                Sign in with Google
            </button>
            <p id="authError" class="text-red-500 text-sm mt-4 text-center"></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Firebase Initialization ---
            const firebaseConfig = {
                apiKey: "AIzaSyD6iB5gh_4arp0UkqILCFRgXq4KRFmDpAY",
                authDomain: "finscope-282b3.firebaseapp.com",
                projectId: "finscope-282b3",
                storageBucket: "finscope-282b3.appspot.com",
                messagingSenderId: "838937656151",
                appId: "1:838937656151:web:85cfddd9dd86b39d4cdc12",
                measurementId: "G-R8GE51ZT8J"
            };
            
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const db = firebase.firestore();
            const appId = firebaseConfig.appId;

            // --- Authentication Logic ---
            auth.onAuthStateChanged(user => {
                if (user) {
                    // If user is logged in, redirect to the main application page
                    console.log("User is signed in, redirecting to main.html");
                    window.location.href = 'main.html';
                } else {
                    console.log("User is signed out.");
                }
            });

            // --- UI Elements ---
            const authModal = document.getElementById('authModal');
            const modalContent = document.getElementById('modalContent');
            const openModalBtns = [document.getElementById('loginBtn'), document.getElementById('getStartedBtnHero')];
            const closeModalBtn = document.getElementById('closeModalBtn');
            const signupTab = document.getElementById('signupTab');
            const loginTab = document.getElementById('loginTab');
            const signupForm = document.getElementById('signupForm');
            const loginForm = document.getElementById('loginForm');
            const authError = document.getElementById('authError');

            // --- Modal and Tab Logic ---
            const openModal = () => authModal.classList.remove('hidden');
            const closeModal = () => authModal.classList.add('hidden');

            openModalBtns.forEach(btn => btn.addEventListener('click', openModal));
            closeModalBtn.addEventListener('click', closeModal);
            authModal.addEventListener('click', e => {
                if (e.target === authModal) closeModal();
            });

            signupTab.addEventListener('click', () => {
                signupTab.classList.add('tab-active');
                loginTab.classList.remove('tab-active');
                signupForm.classList.remove('hidden');
                loginForm.classList.add('hidden');
                authError.textContent = '';
            });

            loginTab.addEventListener('click', () => {
                loginTab.classList.add('tab-active');
                signupTab.classList.remove('tab-active');
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
                authError.textContent = '';
            });

            // --- Firebase Auth Functions ---

            // Helper to save user data to Firestore
            const saveUserData = async (user, additionalData = {}) => {
                if (!user) return;
                const userRef = db.doc(`/artifacts/${appId}/users/${user.uid}/profile/data`);
                try {
                    await userRef.set({
                        uid: user.uid,
                        email: user.email,
                        displayName: user.displayName || additionalData.name,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        ...additionalData
                    }, { merge: true });
                    console.log("User data saved successfully.");
                } catch (error) {
                    console.error("Error saving user data:", error);
                }
            };
            
            // Sign Up with Email and Password
            const signupBtn = document.getElementById('signupBtn');
            signupBtn.addEventListener('click', async () => {
                const name = document.getElementById('signupName').value;
                const email = document.getElementById('signupEmail').value;
                const password = document.getElementById('signupPassword').value;
                authError.textContent = '';

                if (!name || !email || !password) {
                    authError.textContent = 'Please fill out all fields.';
                    return;
                }

                try {
                    const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                    await saveUserData(userCredential.user, { name });
                    // onAuthStateChanged will handle the redirect
                } catch (error) {
                    authError.textContent = error.message;
                }
            });

            // Log In with Email and Password
            const loginEmailBtn = document.getElementById('loginEmailBtn');
            loginEmailBtn.addEventListener('click', async () => {
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                authError.textContent = '';

                if (!email || !password) {
                    authError.textContent = 'Please enter email and password.';
                    return;
                }

                try {
                    await auth.signInWithEmailAndPassword(email, password);
                    // onAuthStateChanged will handle the redirect
                } catch (error) {
                    authError.textContent = error.message;
                }
            });

            // Sign In with Google
            const googleSignInBtn = document.getElementById('googleSignInBtn');
            googleSignInBtn.addEventListener('click', async () => {
                const provider = new firebase.auth.GoogleAuthProvider();
                authError.textContent = '';
                try {
                    const result = await auth.signInWithPopup(provider);
                    await saveUserData(result.user);
                    // onAuthStateChanged will handle the redirect
                } catch (error) {
                    authError.textContent = error.message;
                }
            });
        });
    </script>
</body>
</html>
